{"version":3,"sources":["webpack:///webpack/bootstrap 1db533147540dd8c438c","webpack:///external \"mongoose\"","webpack:///external \"lodash\"","webpack:///./src/index.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"debug\"","webpack:///external \"http\"","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///external \"morgan\"","webpack:///external \"jade\"","webpack:///external \"cookie-parser\"","webpack:///external \"bluebird\"","webpack:///external \"body-parser\"","webpack:///external \"chalk\"","webpack:///./src/utils/AnalyticsWidget.js","webpack:///external \"decision-tree\"","webpack:///./models/Form.js","webpack:///./models/Element.js","webpack:///./models/User.js"],"names":["debug","require","http","express","path","logger","jade","cookieParser","bluebird","bodyParser","mongoose","chalk","_","Analytics","app","Form","Element","User","promisifyAll","Promise","global","connect","keepAlive","reconnectTries","useMongoClient","reconnectInterval","err","hex","error","console","log","green","use","json","urlencoded","extended","static","join","__dirname","set","req","res","next","header","method","send","options","post","namespace","body","elements","find","record","length","save","success","data","union","filter","includes","e","promises","responseData","forEach","element","p","exec","then","analyticsMethod","perSubjectRecent","val","perSubjectFrequency","decisionTree","bayesian","push","all","catch","name","email","password","username","user","runAnalytics","dataset","formNamespace","elementNamespaces","elementValues","values","msg","every","indexOf","elem","records","map","value","key","references","namespaces","finalRef","ele","updatedAt","Date","createdAt","collection","insert","get","remove","d","hasTable","hasOwnProperty","hasAnd","query","hasOr","hasWhere","hasUser","hasLike","hasLimit","$regex","$options","table","where","$all","and","$in","or","like","sort","limit","docs","locals","message","status","port","blue","server","createServer","listen","onError","onListening","syscall","bind","code","process","exit","addr","address","DecisionTree","module","exports","takeRight","frequency","i","uniques","n","compareFrequency","a","b","dt","predicted_class","predict","treeModel","toJSON","toFullNamespace","elementArray","Schema","String","Array","output","model","type"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1db533147540dd8c438c","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 1\n// module chunks = 0","const debug = require('debug')('form-analytics:server');\nconst http = require('http');\nconst express = require('express');\nconst path = require('path');\nconst logger = require('morgan');\nconst jade = require('jade');\nconst cookieParser = require('cookie-parser');\nconst bluebird = require('bluebird');\nconst bodyParser = require('body-parser');\nconst mongoose = require('mongoose');\nconst chalk = require('chalk');\nconst _ = require('lodash');\nconst Analytics = require('./utils/AnalyticsWidget.js');\n\nconst app = express();\n\n//Models\nconst Form = require('../models/Form');\nconst Element = require('../models/Element');\nconst User = require('../models/User');\n\nbluebird.promisifyAll(mongoose);\nmongoose.Promise = global.Promise;\n\n//Connect to Database\nmongoose.connect('mongodb://mongoAdmin:Innov8@34.226.210.46:27017/admin', {\n    keepAlive: true,\n    reconnectTries: 5,\n    useMongoClient: true,\n    reconnectInterval: 500\n}, (err) => {\n    if (err) {\n        chalk.hex('#e81a00')('\\u2715 Failed to Connect to AWS instance, attemping to connect to local instance');\n        mongoose.connect('mongodb://localhost/test', (error) => {\n            if (error) {\n                console.log(chalk.hex('#e81a00')('\\u2715 Failed to Connect to the Database....Check Connection URI'))\n            } else {\n                console.log(chalk.green('\\u2713 connected to MongoDB:LOCAL ENV'));\n            }\n        });\n    } else {\n        console.log(chalk.green('\\u2713 Successfully connected to MongoDB in AWS'));\n\n    }\n});\n\n// uncomment after placing your favicon in /public\napp.use(logger('dev'));\napp.use(bodyParser.json());\n\napp.use(bodyParser.urlencoded({extended: false}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.set('view engine', 'jade');\n\n\n//Allow CORS\napp.use((req, res, next) => {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n    next();\n});\n\napp.use(function(req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Methods', 'GET, PUT, POST, DELETE, OPTIONS');\n    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With');\n    //intercepts OPTIONS method\n    'OPTIONS' === req.method ? res.send(200) : next();\n});\n\napp.options(\"/*\", function(req, res, next){\n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');\n    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With');\n    res.send(200);\n});\n\n\n/**\n * Handles registering a new Namespace (for a new form)\n * or Running Analytics on an existing namespace\n */\napp.post('/form/register', async (req, res) => {\n    //Get the namespace & Required variables i.e. ApplicationName.formName\n    const namespace = req.body.namespace;\n    const elements = req.body.elements;\n    const method = req.body.method;\n\n    Form.find({namespace}, (err, record) => {\n        //There was no namespace this is a new form\n        if(record.length <= 0) {\n            //Create a new namespace\n            new Form({namespace, elements}).save((err, record) => {\n                console.log(chalk.green(`\\u2713 Successfully created new Namespace: ${namespace}`));\n\n                res.json({\n                    success:true,\n                    data: []\n                })\n            });\n\n        } else {\n\n            //Find the different element & Join them into the Form Namespace\n            record[0].set({elements: _.union(elements.filter(e => !record[0].elements.includes(e)), record[0].elements)});\n            record[0].save();\n\n\n            console.log(chalk.green(`\\u2713 Namespace: ${namespace} has been located running analytics...`));\n\n            let promises = [];\n            let responseData = [];\n\n            elements.forEach(element => {\n                console.log(chalk.green(`\\u2713 Found Data for Element Namespace: ${element}`));\n                //Find each element given its parent namespace\n                let p = Element.find({namespace: `${namespace}.${element}`}).exec().then(val => {\n                    //Acts as a switch statement to effectively compute based on the specified method\n                    let analyticsMethod = {\n                        'per-subject-recent': () => {\n                            return  Analytics.perSubjectRecent(val);\n                        },\n                        'per-subject-frequency': () => {\n                            return Analytics.perSubjectFrequency(val);\n                        },\n                        'decision-tree': () => {\n                            return Analytics.decisionTree(val);\n                        },\n                        'bayesian': () => {\n                            return Analytics.bayesian(val);\n                        }\n                    };\n                    //Push the results of the analytics to an empty array\n                    responseData.push(analyticsMethod[method]());\n                });\n                promises.push(p);\n            });\n            Promise.all(promises).then(() => {\n                res.json(responseData);\n            }).catch((err) => {\n                console.error(err);\n            });\n        }\n    });\n});\n\n/**\n * Handles a basic user signup\n */\napp.post('/signup', async (req, res) => {\n    let {name, email, password, username }  = req.body;\n\n    let user = new User({name, email, password, username});\n    user.save();\n\n    res.json({success:true, user});\n});\n\n/**\n * Handles Calculating the Analytics on a custom dataset\n * @param dataset Array of MongoDB document objects\n\n * @param method String Method of analytics to run i.e. \"per-subject-frequency\n */\nconst runAnalytics = async (dataset, method) => {\n\n    let analyticsMethod = {\n        'per-subject-recent': () => {\n            return  Analytics.perSubjectRecent(dataset);\n        },\n        'per-subject-frequency': () => {\n            return Analytics.perSubjectFrequency(dataset);\n        },\n        'decision-tree': () => {\n            return Analytics.decisionTree(dataset);\n        },\n        'bayesian': () => {\n            return Analytics.bayesian(dataset);\n        }\n    };\n\n    //Push the results of the analytics to an empty array\n    return analyticsMethod[method]();\n};\n\n/**\n * Handles Running Analytics on a Custom Set of Data\n */\napp.post('/analytics', async (req, res) => {\n    const data = req.body.data;\n    const method = req.body.method;\n\n    res.json({data: runAnalytics(data, method)});\n\n});\n\n\n/**\n * Handles Inserting data into Mongo but does not run analytics\n * this is how the classifier is updated when the Submit button is pressed\n */\napp.post('/insert', async  (req, res) => {\n    const formNamespace = req.body.namespace; //Pizza.createForm\n    const elementNamespaces = req.body.elements; //[Meat, Veggies, CrustStyle]\n    const elementValues = req.body.values; //[Pepperoni, Tomatoes, Thin]\n    let user = req.body.user; //UserID\n\n    if(typeof user === 'undefined') {\n        user = null\n    }\n\n    if(elementNamespaces.length !== elementValues.length) {\n        console.log(chalk.hex('#e81a00')('\\u2715 ElementOutOfBoundsException Error: More Elements than Values to fill.'));\n        res.json({success: false, msg: 'There were more namespaces than values to fill or vice versa....Please ensure both arrays are of the same length.'});\n    } else {\n\n        //Ensure the elements exist in the Form Namespace\n        Form.find({namespace: formNamespace}, (err, record) => {\n            if (typeof record !== \"undefined\" && record.length > 0) {\n                if (!elementNamespaces.every(elem => record[0].elements.indexOf(elem) > -1)) {\n\n                    //An elementNamespace is not already defined in the Form model\n                    console.log(chalk.hex('#e81a00')('\\u2715 UndefinedNamespaceException: One of the element namespaces has not yet been defined in the Form Model'));\n                    res.json({\n                        success: false,\n                        msg: 'UndefinedNamespaceException: One of the element namespaces has not yet been defined in the Form Model'\n                    })\n\n                } else {\n                    let records = [];\n\n                    //Add a new value for each namespace\n                    elementNamespaces.map((value, key) => {\n                        //Remove the Item being stored from referencing itself\n                        let references = elementValues.filter(e => e !== elementValues[key]);\n                        let namespaces = elementNamespaces.filter(e => e !== elementNamespaces[key]);\n\n                        //Map over each reference and convert it into an object\n                        let finalRef = references.map((ele, key) => {\n                            return {\n                                namespace: `${formNamespace}.${namespaces[key]}`,\n                                value: ele\n                            }\n                        });\n\n                        records.push(new Element({\n                            namespace: `${formNamespace}.${value}`,\n                            value: elementValues[key],\n                            user,\n                            references: finalRef,\n                            updatedAt: new Date(),\n                            createdAt: new Date()\n                        }));\n                    });\n\n                    //Insert Bulk operation\n                    Element.collection.insert(records, (err, data) => {\n                        if(err) res.json({success: false, err});\n                        console.log(chalk.green(`\\u2713 Element data saved!`));\n                        res.json({success: true});\n                    });\n                }\n            } else {\n                console.log(chalk.hex('#e81a00')('\\u2715 UndefinedNamespaceException: One of the Form namespaces has not yet been defined in the Form Model use /form/register to define a new namespace'));\n                res.json({\n                    success: false,\n                    msg: 'UndefinedNamespaceException: One of the Form namespaces has not yet been defined in the Form Model use /form/register to define a new namespace'\n                })\n            }\n        });\n    }\n});\n\n/**\n * Deletes all records in a Collection\n */\napp.get('/remove', (req, res) => {\n    Form.remove({}, () => {});\n    Element.remove({}, () => {});\n    res.json({success: true});\n});\n\napp.get('/all', (req, res) => {\n    Form.find({namespace: \"Pizza.createForm\"}, (err, data) => {\n        console.log(data);\n    });\n\n    Element.find({}, (err, d) => {\n        res.json(d);\n    });\n});\n\napp.post('/query', async (req, res) => {\n    try {\n        var hasTable = req.body.hasOwnProperty('table');\n        var hasAnd = req.body.query.hasOwnProperty('and');\n        var hasOr = req.body.query.hasOwnProperty('or');\n        var hasWhere = req.body.query.hasOwnProperty('where');\n        var hasUser = req.body.query.hasOwnProperty('user');\n        var hasLike = req.body.query.hasOwnProperty('like');\n        var hasLimit = req.body.query.hasOwnProperty('limit');\n    } catch (err) {\n        //They are missing some properties of the query\n        console.log('\\u2715 Part of the Query is Undefined');\n    }\n\n    //Basic Error Checking\n    if(hasAnd && hasOr) {\n        res.json({\n            error: true,\n            msg: 'At this time you must either have an \"and\" property or an \"or\" property but not both.'\n        })\n    }\n\n    if(hasLike && hasWhere) {\n        res.json({\n            error: true,\n            msg: 'At this time you must either have a \"where\" clause or a \"like\" clause but not both'\n        })\n    }\n\n    //Build up the query from an empty object\n    let query = {};\n\n    //Match Req body to query values\n    !hasTable ? query.namespace = {\n        $regex: req.body.namespace,\n        $options: 'i'\n    } : query.namespace = `${req.body.namespace}.${req.body.table}`;\n    hasWhere ? query.value = req.body.query.where : null;\n    hasAnd ? query['references.value'] = {$all: req.body.query.and} : null;\n    hasOr ? query['references.value'] = {$in: req.body.query.or} : null;\n    hasUser ? query.user = req.body.query.user : null;\n    hasLike ? query.value = {$regex: '.*' + req.body.query.like + '.*', $options: 'i'} : null;\n\n    hasLimit ?\n        Element.find(query).sort({'value': -1}).limit(req.body.query.limit).exec((err, docs) => res.json(docs)) :\n        Element.find(query, (err, docs) => {\n            res.json(docs);\n        });\n\n});\n\napp.get('*', async (req, res) => {\n    res.json({success: true, msg: 'The server is active and running!'});\n});\n\n// error handler\napp.use((err, req, res) => {\n    console.log(err);\n    // set locals, only providing error in development\n    res.locals.message = err.message;\n    res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n    // render the error page\n    res.status(err.status || 500);\n\n    res.json({error: err});\n\n});\n\n\n/**\n * Get port from environment and store in Express.\n */\n\nconst port = 3010;\nconsole.log(chalk.blue('\\u2713 Setting Server Port to 3010...'));\napp.set('port', port);\n\n/**\n * Create HTTP server.\n */\nconsole.log(chalk.blue('\\u2713 Creating HTTP Server...'));\nconst server = http.createServer(app);\n\n/**\n * Listen on provided port, on all network interfaces.\n */\n\nserver.listen(port, (err) => {\n    if(err) onError(err);\n    onListening();\n});\n\n/**\n * Event listener for HTTP server \"error\" event.\n */\n\nfunction onError(error) {\n    if (error.syscall !== 'listen') {\n        throw error;\n    }\n\n    let bind = typeof port === 'string'\n        ? 'Pipe ' + port\n        : 'Port ' + port;\n\n    // handle specific listen errors with friendly messages\n    switch (error.code) {\n        case 'EACCES':\n            console.error(bind + ' requires elevated privileges');\n            process.exit(1);\n            break;\n        case 'EADDRINUSE':\n            console.error(bind + ' is already in use');\n            process.exit(1);\n            break;\n        default:\n            throw error;\n    }\n}\n\n/**\n * Event listener for HTTP server \"listening\" event.\n */\nfunction onListening() {\n    let addr = server.address();\n    console.log(chalk.blue('-------------------------------------------'));\n    console.log(chalk.blue(`| Analytics Server Listening on Port ${addr.port} |`));\n    console.log(chalk.blue('-------------------------------------------'));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 4\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"jade\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jade\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 15\n// module chunks = 0","const _ = require('lodash');\nconst DecisionTree = require('decision-tree');\n\nmodule.exports = {\n    /**\n     * Takes the Rightmost 3 Elements from the\n     * Mongoose document array as the most recently used pieces of form data\n     * @param data\n     * @returns {Array}\n     */\n    perSubjectRecent(data) {\n        return _.takeRight(data, 3);\n    },\n\n    /**\n     * Find the most frequently used\n     * @param data\n     */\n    perSubjectFrequency(data) {\n        var frequency = {}, value;\n\n        // compute frequencies of each value\n        for(var i = 0; i < data.length; i++) {\n            value = data[i].value;\n            if(value in frequency) {\n                frequency[value]++;\n            } else {\n                frequency[value] = 1;\n            }\n        }\n\n        // make array from the frequency object to de-duplicate\n        var uniques = [];\n        for(value in frequency) {\n            uniques.push(value);\n        }\n\n        //Remove any blank values\n        uniques = uniques.filter(function(n){ return n != '' });\n\n        // sort the uniques array in descending order by frequency\n        function compareFrequency(a, b) {\n            return frequency[b] - frequency[a];\n        }\n        return uniques.sort(compareFrequency);\n    },\n\n    decisionTree(data) {\n        let dt = new DecisionTree(data, \"value\", [\"value\", \"namespace\"]);\n\n        let predicted_class = dt.predict({\n            value: \"Ham\",\n            namespace: \"Pizza.createForm.Meats\"\n        });\n\n        let treeModel = dt.toJSON();\n        return predicted_class;\n\n    },\n\n    bayesian(data) {\n        //TODO mutate data\n        return data;\n    },\n\n    /**\n     * Takes a Parent Form Namespace and an array of elements which belong to the form\n     * and returns an array of fully quantified Namespaces ready for querying\n     * @param formNamespace\n     * @param elementArray\n     */\n    toFullNamespace(formNamespace, elementArray) {\n        return elementArray.map(value => {\n            return `${formNamespace}.${value}`\n        });\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/AnalyticsWidget.js","module.exports = require(\"decision-tree\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"decision-tree\"\n// module id = 17\n// module chunks = 0","/**\n * Created by christianbartram on 10/18/17.\n */\nconst mongoose = require('mongoose');\n\nlet Form = mongoose.Schema({\n    namespace: String,\n    elements: Array,\n    output: String,\n    method: String\n});\n\n/**\n * Schema Methods\n */\n\n//Export the Model\nmodule.exports = mongoose.model('Form', Form);\n\n\n// WEBPACK FOOTER //\n// ./models/Form.js","/**\n * Created by christianbartram on 10/18/17.\n */\nconst mongoose = require('mongoose');\n\nlet Element = mongoose.Schema({\n    namespace: String, //Element on the forms specific namespace/id\n    type: String, //Select field, radio button, checkbox etc...\n    value: String,\n    user: String,\n    references: Array,\n    updatedAt: Date,\n    createdAt: Date\n});\n\n/**\n * Schema Methods\n */\n\n//Export the Model\nmodule.exports = mongoose.model('Element', Element);\n\n\n// WEBPACK FOOTER //\n// ./models/Element.js","/**\n * Created by christianbartram on 10/18/17.\n */\nconst mongoose = require('mongoose');\n\n\nlet User = mongoose.Schema({\n  name: String,\n  username: String,\n  email: String,\n  password: String\n});\n\n/**\n * Schema Methods\n */\n\n//Export the Model\nmodule.exports = mongoose.model('User', User);\n\n\n// WEBPACK FOOTER //\n// ./models/User.js"],"sourceRoot":""}