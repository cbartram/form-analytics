{"version":3,"sources":["webpack:///webpack/bootstrap d835baa3a6497229ed2c","webpack:///external \"mongoose\"","webpack:///external \"chalk\"","webpack:///external \"lodash\"","webpack:///./src/index.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///external \"express\"","webpack:///external \"path\"","webpack:///external \"morgan\"","webpack:///external \"jade\"","webpack:///external \"cookie-parser\"","webpack:///external \"bluebird\"","webpack:///external \"body-parser\"","webpack:///external \"decision-tree\"","webpack:///./models/Form.js","webpack:///./models/Element.js","webpack:///./models/User.js","webpack:///external \"debug\"","webpack:///external \"http\"","webpack:///./src/utils/AnalyticsWidget.js"],"names":["Element","find","foo","debug","require","http","express","path","logger","jade","cookieParser","bluebird","bodyParser","mongoose","chalk","_","Analytics","app","Form","User","promisifyAll","Promise","global","connect","keepAlive","reconnectTries","useMongoClient","reconnectInterval","err","hex","error","console","log","green","use","json","urlencoded","extended","static","join","__dirname","set","req","res","next","header","method","send","options","post","namespace","body","elements","record","length","save","success","data","union","filter","includes","e","promises","responseData","forEach","element","p","exec","then","analyticsMethod","perSubjectRecent","val","perSubjectFrequency","decisionTree","bayesian","push","all","catch","name","email","password","username","user","runAnalytics","dataset","formNamespace","elementNamespaces","elementValues","values","msg","every","indexOf","elem","records","map","value","key","references","namespaces","finalRef","ele","updatedAt","Date","createdAt","collection","insert","get","remove","d","hasTable","hasOwnProperty","hasAnd","query","hasOr","hasWhere","hasUser","hasLike","hasLimit","$regex","$options","table","where","$all","and","$in","or","like","sort","limit","docs","locals","message","status","port","blue","server","createServer","listen","onError","onListening","syscall","bind","code","process","exit","addr","address","Schema","String","Array","output","module","exports","model","type","DecisionTree","takeRight","frequency","i","uniques","n","compareFrequency","a","b","dt","predicted_class","predict","treeModel","toJSON","toFullNamespace","elementArray"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d835baa3a6497229ed2c","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 2\n// module chunks = 0","const debug = require('debug')('form-analytics:server');\nconst http = require('http');\nconst express = require('express');\nconst path = require('path');\nconst logger = require('morgan');\nconst jade = require('jade');\nconst cookieParser = require('cookie-parser');\nconst bluebird = require('bluebird');\nconst bodyParser = require('body-parser');\nconst mongoose = require('mongoose');\nconst chalk = require('chalk');\nconst _ = require('lodash');\nconst Analytics = require('./utils/AnalyticsWidget.js');\n\nconst app = express();\n\n//Models\nconst Form = require('../models/Form');\nconst Element = require('../models/Element');\nconst User = require('../models/User');\n\nbluebird.promisifyAll(mongoose);\nmongoose.Promise = global.Promise;\n\n//Connect to Database\nmongoose.connect('mongodb://mongoAdmin:Innov8@34.226.210.46:27017/admin', {\n    keepAlive: true,\n    reconnectTries: 5,\n    useMongoClient: true,\n    reconnectInterval: 500\n}, (err) => {\n    if (err) {\n        chalk.hex('#e81a00')('\\u2715 Failed to Connect to AWS instance, attemping to connect to local instance');\n        mongoose.connect('mongodb://localhost/test', (error) => {\n            if (error) {\n                console.log(chalk.hex('#e81a00')('\\u2715 Failed to Connect to the Database....Check Connection URI'))\n            } else {\n                console.log(chalk.green('\\u2713 connected to MongoDB:LOCAL ENV'));\n            }\n        });\n    } else {\n        console.log(chalk.green('\\u2713 Successfully connected to MongoDB in AWS'));\n\n    }\n});\n\n// uncomment after placing your favicon in /public\napp.use(logger('dev'));\napp.use(bodyParser.json());\n\napp.use(bodyParser.urlencoded({extended: false}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.set('view engine', 'jade');\n\n\n//Allow CORS\napp.use((req, res, next) => {\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\n    res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\n    next();\n});\n\napp.use(function(req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Methods', 'GET, PUT, POST, DELETE, OPTIONS');\n    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With');\n    //intercepts OPTIONS method\n    'OPTIONS' === req.method ? res.send(200) : next();\n});\n\napp.options(\"/*\", function(req, res, next){\n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS');\n    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization, Content-Length, X-Requested-With');\n    res.send(200);\n});\n\n\n/**\n * Handles registering a new Namespace (for a new form)\n * or Running Analytics on an existing namespace\n */\napp.post('/form/register', (req, res) => {\n    //Get the namespace & Required variables i.e. ApplicationName.formName\n    const namespace = req.body.namespace;\n    const elements = req.body.elements;\n    const method = req.body.method;\n\n    Form.find({namespace}, (err, record) => {\n        //There was no namespace this is a new form\n        if(record.length <= 0) {\n            //Create a new namespace\n            new Form({namespace, elements}).save((err, record) => {\n                console.log(chalk.green(`\\u2713 Successfully created new Namespace: ${namespace}`));\n\n                res.json({\n                    success:true,\n                    data: []\n                })\n            });\n\n        } else {\n\n            //Find the different element & Join them into the Form Namespace\n            record[0].set({elements: _.union(elements.filter(e => !record[0].elements.includes(e)), record[0].elements)});\n            record[0].save();\n\n\n            console.log(chalk.green(`\\u2713 Namespace: ${namespace} has been located running analytics...`));\n\n            let promises = [];\n            let responseData = [];\n\n            elements.forEach(element => {\n                console.log(chalk.green(`\\u2713 Found Data for Element Namespace: ${element}`));\n                //Find each element given its parent namespace\n                let p = Element.find({namespace: `${namespace}.${element}`}).exec().then(val => {\n                    //Acts as a switch statement to effectively compute based on the specified method\n                    let analyticsMethod = {\n                        'per-subject-recent': () => {\n                            return  Analytics.perSubjectRecent(val);\n                        },\n                        'per-subject-frequency': () => {\n                            return Analytics.perSubjectFrequency(val);\n                        },\n                        'decision-tree': () => {\n                            return Analytics.decisionTree(val);\n                        },\n                        'bayesian': () => {\n                            return Analytics.bayesian(val);\n                        }\n                    };\n                    //Push the results of the analytics to an empty array\n                    responseData.push(analyticsMethod[method]());\n                });\n                promises.push(p);\n            });\n            Promise.all(promises).then(() => {\n                res.json(responseData);\n            }).catch((err) => {\n                console.error(err);\n            });\n        }\n    });\n});\n\n/**\n * Handles a basic user signup\n */\napp.post('/signup', (req, res) => {\n    let {name, email, password, username }  = req.body;\n\n    let user = new User({name, email, password, username});\n    user.save();\n\n    res.json({success:true, user});\n});\n\n/**\n * Handles Calculating the Analytics on a custom dataset\n * @param dataset Array of MongoDB document objects\n\n * @param method String Method of analytics to run i.e. \"per-subject-frequency\n */\nconst runAnalytics = (dataset, method) => {\n\n    let analyticsMethod = {\n        'per-subject-recent': () => {\n            return  Analytics.perSubjectRecent(dataset);\n        },\n        'per-subject-frequency': () => {\n            return Analytics.perSubjectFrequency(dataset);\n        },\n        'decision-tree': () => {\n            return Analytics.decisionTree(dataset);\n        },\n        'bayesian': () => {\n            return Analytics.bayesian(dataset);\n        }\n    };\n\n    //Push the results of the analytics to an empty array\n    return analyticsMethod[method]();\n};\n\n/**\n * Handles Running Analytics on a Custom Set of Data\n */\napp.post('/analytics', (req, res) => {\n    const data = req.body.data;\n    const method = req.body.method;\n\n    res.json({data: runAnalytics(data, method)});\n\n});\n\n\n/**\n * Handles Inserting data into Mongo but does not run analytics\n * this is how the classifier is updated when the Submit button is pressed\n */\napp.post('/insert', (req, res) => {\n    const formNamespace = req.body.namespace; //Pizza.createForm\n    const elementNamespaces = req.body.elements; //[Meat, Veggies, CrustStyle]\n    const elementValues = req.body.values; //[Pepperoni, Tomatoes, Thin]\n    let user = req.body.user; //UserID\n\n    if(typeof user === 'undefined') {\n        user = null\n    }\n\n    if(elementNamespaces.length !== elementValues.length) {\n        console.log(chalk.hex('#e81a00')('\\u2715 ElementOutOfBoundsException Error: More Elements than Values to fill.'));\n        res.json({success: false, msg: 'There were more namespaces than values to fill or vice versa....Please ensure both arrays are of the same length.'});\n    } else {\n\n        //Ensure the elements exist in the Form Namespace\n        Form.find({namespace: formNamespace}, (err, record) => {\n            if (typeof record !== \"undefined\" && record.length > 0) {\n                if (!elementNamespaces.every(elem => record[0].elements.indexOf(elem) > -1)) {\n\n                    //An elementNamespace is not already defined in the Form model\n                    console.log(chalk.hex('#e81a00')('\\u2715 UndefinedNamespaceException: One of the element namespaces has not yet been defined in the Form Model'));\n                    res.json({\n                        success: false,\n                        msg: 'UndefinedNamespaceException: One of the element namespaces has not yet been defined in the Form Model'\n                    })\n\n                } else {\n                    let records = [];\n\n                    //Add a new value for each namespace\n                    elementNamespaces.map((value, key) => {\n                        //Remove the Item being stored from referencing itself\n                        let references = elementValues.filter(e => e !== elementValues[key]);\n                        let namespaces = elementNamespaces.filter(e => e !== elementNamespaces[key]);\n\n                        //Map over each reference and convert it into an object\n                        let finalRef = references.map((ele, key) => {\n                            return {\n                                namespace: `${formNamespace}.${namespaces[key]}`,\n                                value: ele\n                            }\n                        });\n\n                        records.push(new Element({\n                            namespace: `${formNamespace}.${value}`,\n                            value: elementValues[key],\n                            user,\n                            references: finalRef,\n                            updatedAt: new Date(),\n                            createdAt: new Date()\n                        }));\n                    });\n\n                    //Insert Bulk operation\n                    Element.collection.insert(records, (err, data) => {\n                        if(err) res.json({success: false, err});\n                        console.log(chalk.green(`\\u2713 Element data saved!`));\n                        res.json({success: true});\n                    });\n                }\n            } else {\n                console.log(chalk.hex('#e81a00')('\\u2715 UndefinedNamespaceException: One of the Form namespaces has not yet been defined in the Form Model use /form/register to define a new namespace'));\n                res.json({\n                    success: false,\n                    msg: 'UndefinedNamespaceException: One of the Form namespaces has not yet been defined in the Form Model use /form/register to define a new namespace'\n                })\n            }\n        });\n    }\n});\n\n/**\n * Deletes all records in a Collection\n */\napp.get('/remove', (req, res) => {\n    Form.remove({}, () => {});\n    Element.remove({}, () => {});\n    res.json({success: true});\n});\n\napp.get('/all', (req, res) => {\n    Form.find({namespace: \"Pizza.createForm\"}, (err, data) => {\n        console.log(data);\n    });\n\n    Element.find({}, (err, d) => {\n        res.json(d);\n    });\n});\n\napp.post('/query', (req, res) => {\n    try {\n        var hasTable = req.body.hasOwnProperty('table');\n        var hasAnd = req.body.query.hasOwnProperty('and');\n        var hasOr = req.body.query.hasOwnProperty('or');\n        var hasWhere = req.body.query.hasOwnProperty('where');\n        var hasUser = req.body.query.hasOwnProperty('user');\n        var hasLike = req.body.query.hasOwnProperty('like');\n        var hasLimit = req.body.query.hasOwnProperty('limit');\n    } catch (err) {\n        //They are missing some properties of the query\n        console.log('\\u2715 Part of the Query is Undefined');\n    }\n\n    //Basic Error Checking\n    if(hasAnd && hasOr) {\n        res.json({\n            error: true,\n            msg: 'At this time you must either have an \"and\" property or an \"or\" property but not both.'\n        })\n    }\n\n    if(hasLike && hasWhere) {\n        res.json({\n            error: true,\n            msg: 'At this time you must either have a \"where\" clause or a \"like\" clause but not both'\n        })\n    }\n\n    //Build up the query from an empty object\n    let query = {};\n\n    //Match Req body to query values\n    !hasTable ? query.namespace = {\n        $regex: req.body.namespace,\n        $options: 'i'\n    } : query.namespace = `${req.body.namespace}.${req.body.table}`;\n    hasWhere ? query.value = req.body.query.where : null;\n    hasAnd ? query['references.value'] = {$all: req.body.query.and} : null;\n    hasOr ? query['references.value'] = {$in: req.body.query.or} : null;\n    hasUser ? query.user = req.body.query.user : null;\n    hasLike ? query.value = {$regex: '.*' + req.body.query.like + '.*', $options: 'i'} : null;\n\n    hasLimit ?\n        Element.find(query).sort({'value': -1}).limit(req.body.query.limit).exec((err, docs) => res.json(docs)) :\n        Element.find(query, (err, docs) => {\n            res.json(docs);\n        });\n\n});\n\nasync function foo() {\n    await Element.find({});\n}\n\napp.get('*', (req, res) => {\n    res.json({success: true, msg: 'The server is active and running!'});\n});\n\n// error handler\napp.use((err, req, res) => {\n    console.log(err);\n    // set locals, only providing error in development\n    res.locals.message = err.message;\n    res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n    // render the error page\n    res.status(err.status || 500);\n\n    res.json({error: err});\n\n});\n\n\n/**\n * Get port from environment and store in Express.\n */\n\nconst port = 3010;\nconsole.log(chalk.blue('\\u2713 Setting Server Port to 3010...'));\napp.set('port', port);\n\n/**\n * Create HTTP server.\n */\nconsole.log(chalk.blue('\\u2713 Creating HTTP Server...'));\nconst server = http.createServer(app);\n\n/**\n * Listen on provided port, on all network interfaces.\n */\n\nserver.listen(port, (err) => {\n    if(err) onError(err);\n    onListening();\n});\n\n/**\n * Event listener for HTTP server \"error\" event.\n */\n\nfunction onError(error) {\n    if (error.syscall !== 'listen') {\n        throw error;\n    }\n\n    let bind = typeof port === 'string'\n        ? 'Pipe ' + port\n        : 'Port ' + port;\n\n    // handle specific listen errors with friendly messages\n    switch (error.code) {\n        case 'EACCES':\n            console.error(bind + ' requires elevated privileges');\n            process.exit(1);\n            break;\n        case 'EADDRINUSE':\n            console.error(bind + ' is already in use');\n            process.exit(1);\n            break;\n        default:\n            throw error;\n    }\n}\n\n/**\n * Event listener for HTTP server \"listening\" event.\n */\nfunction onListening() {\n    let addr = server.address();\n    console.log(chalk.blue('-------------------------------------------'));\n    console.log(chalk.blue(`| Analytics Server Listening on Port ${addr.port} |`));\n    console.log(chalk.blue('-------------------------------------------'));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/regenerator/index.js\n// module id = 6\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"morgan\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"morgan\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"jade\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jade\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"decision-tree\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"decision-tree\"\n// module id = 16\n// module chunks = 0","/**\n * Created by christianbartram on 10/18/17.\n */\nconst mongoose = require('mongoose');\n\nlet Form = mongoose.Schema({\n    namespace: String,\n    elements: Array,\n    output: String,\n    method: String\n});\n\n/**\n * Schema Methods\n */\n\n//Export the Model\nmodule.exports = mongoose.model('Form', Form);\n\n\n// WEBPACK FOOTER //\n// ./models/Form.js","/**\n * Created by christianbartram on 10/18/17.\n */\nconst mongoose = require('mongoose');\n\nlet Element = mongoose.Schema({\n    namespace: String, //Element on the forms specific namespace/id\n    type: String, //Select field, radio button, checkbox etc...\n    value: String,\n    user: String,\n    references: Array,\n    updatedAt: Date,\n    createdAt: Date\n});\n\n/**\n * Schema Methods\n */\n\n//Export the Model\nmodule.exports = mongoose.model('Element', Element);\n\n\n// WEBPACK FOOTER //\n// ./models/Element.js","/**\n * Created by christianbartram on 10/18/17.\n */\nconst mongoose = require('mongoose');\n\n\nlet User = mongoose.Schema({\n  name: String,\n  username: String,\n  email: String,\n  password: String\n});\n\n/**\n * Schema Methods\n */\n\n//Export the Model\nmodule.exports = mongoose.model('User', User);\n\n\n// WEBPACK FOOTER //\n// ./models/User.js","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 21\n// module chunks = 0","const _ = require('lodash');\nconst DecisionTree = require('decision-tree');\n\nmodule.exports = {\n    /**\n     * Takes the Rightmost 3 Elements from the\n     * Mongoose document array as the most recently used pieces of form data\n     * @param data\n     * @returns {Array}\n     */\n    perSubjectRecent(data) {\n        return _.takeRight(data, 3);\n    },\n\n    /**\n     * Find the most frequently used\n     * @param data\n     */\n    perSubjectFrequency(data) {\n        var frequency = {}, value;\n\n        // compute frequencies of each value\n        for(var i = 0; i < data.length; i++) {\n            value = data[i].value;\n            if(value in frequency) {\n                frequency[value]++;\n            } else {\n                frequency[value] = 1;\n            }\n        }\n\n        // make array from the frequency object to de-duplicate\n        var uniques = [];\n        for(value in frequency) {\n            uniques.push(value);\n        }\n\n        //Remove any blank values\n        uniques = uniques.filter(function(n){ return n != '' });\n\n        // sort the uniques array in descending order by frequency\n        function compareFrequency(a, b) {\n            return frequency[b] - frequency[a];\n        }\n        return uniques.sort(compareFrequency);\n    },\n\n    decisionTree(data) {\n        let dt = new DecisionTree(data, \"value\", [\"value\", \"namespace\"]);\n\n        let predicted_class = dt.predict({\n            value: \"Ham\",\n            namespace: \"Pizza.createForm.Meats\"\n        });\n\n        let treeModel = dt.toJSON();\n        return predicted_class;\n\n    },\n\n    bayesian(data) {\n        //TODO mutate data\n        return data;\n    },\n\n    /**\n     * Takes a Parent Form Namespace and an array of elements which belong to the form\n     * and returns an array of fully quantified Namespaces ready for querying\n     * @param formNamespace\n     * @param elementArray\n     */\n    toFullNamespace(formNamespace, elementArray) {\n        return elementArray.map(value => {\n            return `${formNamespace}.${value}`\n        });\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/AnalyticsWidget.js"],"sourceRoot":""}